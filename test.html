<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./assets/css/vailidateForm.css">
  <title>Document</title>
  <style>
    .form-group.success .form-control{
      border-color: #1dbfaf;
    }

    .form-submit {
      border-radius: 4px;
    }

    .form-submit.active {
      background-color: #3d8fc2;
      cursor: pointer;
    }

    .form-submit:disabled {
      background-color: #9EC7E0;
      cursor: not-allowed;
    }

  </style>
</head>

<body>
  <div class="main">
    <form action="" method="POST" class="form" id="form-1">

      <div class="form-group">
        <label for="name" class="form-label">Name</label>
        <input id="name" name="name" autocomplete="on" type="text" class="form-control">
        <div class="form-message"></div>
      </div>

      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <input id="email" name="email" autocomplete="on" type="text" class="form-control">
        <div class="form-message"></div>
      </div>

      <div class="form-group">
        <label for="password" class="form-label">Password</label>
        <input id="password" name="password" autocomplete="on" type="password" class="form-control">
        <div class="form-message"></div>
      </div>

      <div class="form-group">
        <label for="password_confirmation" class="form-label">Confirm Password</label>
        <input id="password_confirmation" name="password_confirmation" autocomplete="on" type="password" class="form-control">
        <div class="form-message"></div>
      </div>

      <button class="form-submit">Sign Up</button>
    </form>

    <ul class="message-container">
      <li class="message-item name"></li>
      <li class="message-item email"></li>
      <li class="message-item password"></li>
    </ul>
  </div>

  <script>
    const form = document.getElementById('form-1');
    const nameElement = document.getElementById('name');
    const emailElement = document.getElementById('email');
    const passwordElement = document.getElementById('password');
    const passwordConfirmElement = document.getElementById('password_confirmation');
    const submitBtn = document.querySelector('.form-submit');

    // const nameMessage = document.querySelector('.message-item.name');
    // const emailMessage = document.querySelector('.message-item.email');
    // const passwordMessage = document.querySelector('.message-item.password');
    const messages = document.querySelector('.message-container');


    form.addEventListener('submit', (e) => {
      e.preventDefault();
        validator();
    });


    const showError = (element, messageText, elementName) => {
      const inputParent = element.parentElement;
      inputParent.classList.add('invalid');
      console.log(elementName)
      const messageItem = messages.closest(`.messageItem.${elementName}`);
      console.log(messageItem)
      // messageItem.innerText = messageText;
      // messageItem.classList.add('invalid');
      
    };

    const isValidEmail = email => {
      const regex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
      return regex.test(email.toLowerCase());
    }

    const validator = () => {
        const nameValue = nameElement.value.trim();
        const emailValue = emailElement.value.trim();
        const passwordValue = passwordElement.value.trim();
        const passworConfirmdValue = passwordConfirmElement.value.trim();

        if(nameValue === '') {
          showError(nameElement, 'Please fill this field','name')
        }

        if(emailValue === '') {
          showError(emailElement, 'Please fill this field','email')
        }
        else if (!isValidEmail(emailValue)) {
          showError(emailElement, 'Please type valid email','email')
        }

        if(passwordValue === '') {
          showError(passwordElement, 'Please type your password','password')
        }
        else if(passwordValue.length < 6) {
          showError(passwordElement, 'Please fill at least 6 characters','password')
        }

        if(passworConfirmdValue === '') {
          showError(passwordConfirmElement, 'Please confirm your password')
        }
        else if(passworConfirmdValue !== passwordValue) {
          showError(passwordConfirmElement, 'Please confirm your password correctly')
        }

    };



  </script>
</body>

</html>